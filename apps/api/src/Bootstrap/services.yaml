services:
    _defaults:
        autowire: true
        autoconfigure: true

    App\Application\:
        resource: "../Application/"

    App\Adapters\:
        resource: "../Adapters/"
        exclude:
            - "../Adapters/In/Http/"

    App\Adapters\In\Http\:
        resource: "../Adapters/In/Http/"
        tags: ["controller.service_arguments"]

    App\Application\Ports\PasswordVerifier: '@App\Adapters\Out\Security\NativePasswordVerifier'
    App\Application\Ports\AuthSessionManager: '@App\Adapters\Out\Security\SymfonyAuthSessionManager'
    App\Domain\Repository\UserRepository: '@App\Adapters\Out\Persistence\Repos\DoctrineUserRepository'
    App\Domain\Repository\DoRepository: '@App\Adapters\Out\Persistence\Repos\DoctrineDoRepository'
    App\Domain\Repository\GrapeRepository: '@App\Adapters\Out\Persistence\Repos\DoctrineGrapeRepository'
    App\Domain\Repository\AwardRepository: '@App\Adapters\Out\Persistence\Repos\DoctrineAwardRepository'
    App\Domain\Repository\WineReviewRepository: '@App\Adapters\Out\Persistence\Repos\DoctrineWineReviewRepository'
    App\Domain\Repository\WineRepository: '@App\Adapters\Out\Persistence\Repos\DoctrineWineRepository'
    App\Domain\Repository\WinePhotoRepository: '@App\Adapters\Out\Persistence\Repos\DoctrinePhotoRepository'
    App\Application\Ports\WinePhotoStoragePort: '@App\Adapters\Out\Storage\LocalWinePhotoStorage'

    App\Adapters\Out\Storage\LocalWinePhotoStorage:
        arguments:
            $baseDir: '/shared/public/images/wines'

    # Domain objects are pure PHP and should not be container services by default.
    App\Domain\:
        resource: "../Domain/"
        exclude:
            - "../Domain/**/Enum/"
            - "../Domain/**/Model/"
            - "../Domain/**/ValueObject/"
            - "../Domain/**/Event/"
